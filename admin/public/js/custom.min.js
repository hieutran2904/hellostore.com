jQuery(window).on("load", function() {
    $('#preloader').fadeOut(500);
    $('#main-wrapper').addClass('show');

    $('body').attr('data-sidebar-style') === "mini" ? $(".hamburger").addClass('is-active') : $(".hamburger").removeClass('is-active')
});

(function($) {
    "use strict";






    $("#menu").metisMenu();

    $('.nk-nav-scroll').slimscroll({
        position: "right",
        size: "5px",
        height: "100%",
        color: "transparent"
    });



    $(".nav-control").on('click', function() {

        $('#main-wrapper').toggleClass("menu-toggle");

        $(".hamburger").toggleClass("is-active");
    });


    $(function() {
        for (var nk = window.location, 
            o = $("ul#menu a").filter(function() {
                    return this.href == nk;
                })
                .addClass("active")
                .parent()
                .addClass("active");;) {
            if (!o.is("li")) break;
            o = o.parent()
                .addClass("in")
                .parent()
                .addClass("active");
        }
    });

    $(function() {
        var win_h = window.outerHeight;
        if (win_h > 0 ? win_h : screen.height) {
            $(".content-body").css("min-height", (win_h + 60) + "px");
        };
    });





    $('.selectpicker').selectpicker();



    $('[data-toggle="popover"]').popover();
    $('[data-toggle="tooltip"]').tooltip();


  

    const headerHight = $('.header').innerHeight();

    $(window).scroll(function() {
        if($('body').attr('data-layout') === "horizontal" && $('body').attr('data-header-position') === "static" && $('body').attr('data-sidebar-position') === "fixed")
            $(this.window).scrollTop() >= headerHight ? $('.metismenu').addClass('fixed') :  $('.metismenu').removeClass('fixed')
    });

    $('.sidebar-right-trigger').on('click', function() {
        $('.sidebar-right').toggleClass('show');
    });






})(jQuery);

//custom
// document.querySelector('#val-image').addEventListener('change', (e) => {
$('#val-image').on('change', (e) => {
    if(window.File && window.FileReader && window.FileList && window.Blob) {
        const files = e.target.files;
        console.log(files);
        const output = document.querySelector('.result');
        console.log(output);
        output.innerHTML = '';
        if (files.length == 1) {
            if (!files[0].type.match('image')) return;
            const picReader = new FileReader();
            picReader.addEventListener('load', function(event){
                const picFile = event.target;
                console.log(picFile);
                output.innerHTML += `<div class="col-md-12">
                <img style="width: 100%; height: 250px; object-fit: cover;" class="img-fluid img-thumbnail rounded" src="${picFile.result}" alt="#">
            </div>`;
            });
            picReader.readAsDataURL(files[0]);
            return;
        } else{
        for (let i = 0; i < files.length; i++) {
            if (i == 4) break;
            console.log(files[i]);
            if (!files[i].type.match('image')) continue;
            const picReader = new FileReader();
            picReader.addEventListener('load', function(event){
                const picFile = event.target;
                console.log(picFile);
                output.innerHTML += `<div class="col-md-3">
                <img style="width: 300px; height: 300px; object-fit: cover;" class="img-fluid img-thumbnail rounded" src="${picFile.result}" alt="#">
            </div>`;
            });
            picReader.readAsDataURL(files[i]);
        }
    }
    } else {
        alert('The File APIs are not fully supported in this browser.');
    }
})
